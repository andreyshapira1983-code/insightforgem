<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Star Galaxy — ИИ‑анализатор бизнес‑идей</title>

  <!-- canonical -->
  <link rel="canonical" href="https://insightforgem.netlify.app/"/>

  <meta name="description" content="Star Galaxy — генератор и ИИ‑анализатор бизнес‑идей: оценка потенциала, поиск похожих патентов и юридические аспекты для разных рынков."/>
  <link rel="stylesheet" href="css/styles.css"/>
  <link rel="stylesheet" href="css/global-fixes.css"/>
</head>
<body>
  <canvas id="galaxy-bg" aria-hidden="true"></canvas>

  <!-- Шапка (можешь оставить пустой или перенести сюда кнопку логина) -->
  <header class="site-header" role="banner"></header>

  <!-- Боковое меню как landmark -->
  <nav class="sidebar" aria-label="Основное меню">
    <div class="sidebar-header">
      <div class="galaxy-logo">
        <div class="logo-planet"></div>
        <div class="logo-ring"></div>
      </div>
      <!-- Сайдбар-логотип — НЕ заголовок -->
      <span class="sidebar-title">Star Galaxy</span>
    </div>

    <ul class="sidebar-menu">
      <li class="active" data-page="dashboard">
        <a href="#">
          <div class="galaxy-icon dashboard-icon">
            <div class="planet"></div>
            <div class="orbit"></div>
          </div>
          <span>Dashboard</span>
        </a>
      </li>
      <li data-page="myIdeas">
        <a href="#">
          <div class="galaxy-icon idea-icon">
            <div class="star-burst"></div>
          </div>
          <span>My Ideas</span><span class="coming-soon">Soon</span>
        </a>
      </li>
      <li data-page="trending">
        <a href="#">
          <div class="galaxy-icon trend-icon"><div class="comet"></div></div>
          <span>Trending</span><span class="coming-soon">Soon</span>
        </a>
      </li>
      <li data-page="resources">
        <a href="#">
          <div class="galaxy-icon resource-icon"><div class="galaxy-spiral"></div></div>
          <span>Resources</span><span class="coming-soon">Soon</span>
        </a>
      </li>
      <li data-page="community">
        <a href="#">
          <div class="galaxy-icon community-icon"><div class="stars-group"></div></div>
          <span>Community</span><span class="coming-soon">Soon</span>
        </a>
      </li>
    </ul>

    <div class="sidebar-footer legal-footer-center"><!-- пусто --></div>
  </nav>

  <!-- ОСНОВНОЙ LANDMARK -->
  <main id="main" role="main" class="app-container">
    <div class="main-content" id="main-content">
      <!-- Единственный H1 -->
      <h1 id="main-title"><span class="title-text">Star Galaxy — ИИ‑анализатор бизнес‑идей</span></h1>

      <div class="card" id="main-card">
        <p id="instruction-text">Введите идею ниже и нажмите «Generate», чтобы получить подробную обратную связь, анализ патентов и юридические аспекты по миру.</p>

        <textarea id="idea-text" placeholder="Enter your idea here..."></textarea>

        <div class="ai-options">
          <div class="ai-option selected" data-mode="analyze">
            <div class="galaxy-icon analyze-icon"><div class="analyze-beam"></div></div>
            Business Analysis
          </div>
          <div class="ai-option" data-mode="market">
            <div class="galaxy-icon market-icon"><div class="market-graph"></div></div>
            Market Research
          </div>
          <div class="ai-option" data-mode="improve">
            <div class="galaxy-icon improve-icon"><div class="improve-spark"></div></div>
            Idea Improvement
          </div>
        </div>

        <button id="analyze-button" class="cosmic-button">
          <div class="button-stars"></div><span>Generate</span>
        </button>

        <div id="results-container" style="display:none"></div>
      </div>

      <!-- Юридический блок -->
      <section class="card" id="legal-content" hidden aria-labelledby="legal-title">
        <button class="cosmic-button" id="back-to-main" style="margin-bottom:20px;">
          <span>← Back to Generator</span>
        </button>
        <h3 id="legal-title">Legal Information</h3>
        <div id="legal-body"><!-- заполняется скриптом --></div>
      </section>
    </div>
  </main>

  <!-- Боковая панель как landmark -->
  <aside class="info-panel" aria-labelledby="market-trend-header">
    <div class="info-panel-header market-trend-absolute market-trend-flex" id="market-trend-header">
      Market Trends
      <span class="login-btn">
        <button class="auth-button" id="header-sign-in" data-role="signin">Sign in</button>
      </span>
    </div>

    <div class="trend-item">
      <div class="trend-title">AI &amp; Machine Learning</div>
      <div class="trend-description">Growing at 38% annually with applications in healthcare, finance, and education.</div>
    </div>

    <div class="trend-item">
      <div class="trend-title">Sustainable Products</div>
      <div class="trend-description">Eco-friendly solutions seeing 25% growth as consumer awareness increases.</div>
    </div>

    <div class="trend-item">
      <div class="trend-title">Remote Work Tools</div>
      <div class="trend-description">Collaboration platforms continue strong growth post-pandemic.</div>
    </div>

    <div class="info-panel-header">Tips</div>
    <div class="trend-item"><div class="trend-description">Be specific about your target market when describing your idea.</div></div>
    <div class="trend-item"><div class="trend-description">Consider how your idea solves a real problem for users.</div></div>

    <div class="info-panel-header">Global Considerations</div>
    <div class="trend-item"><div class="trend-description">Different countries have different patent laws and intellectual property protections.</div></div>
    <div class="trend-item"><div class="trend-description">Our analysis includes legal considerations for major global markets.</div></div>
  </aside>

  <!-- Модалка авторизации -->
  <div id="auth-modal" class="auth-modal" hidden>
    <div class="auth-modal-content" role="dialog" aria-labelledby="auth-title" aria-modal="true">
      <button class="auth-modal-close" aria-label="Close">×</button>
      <h4 id="auth-title" class="auth-modal-title">Sign in</h4>
      <p class="auth-modal-subtitle">Choose how you'd like to sign in</p>

      <div class="social-auth-buttons">
        <button class="social-auth-button" id="google-auth">
          <img alt="Google" src="https://cdn-icons-png.flaticon.com/512/2991/2991148.png"/>
          <span>Google</span>
        </button>
        <button class="social-auth-button" id="facebook-auth">
          <img alt="Facebook" src="https://cdn-icons-png.flaticon.com/512/5968/5968764.png"/>
          <span>Facebook</span>
        </button>
        <button class="social-auth-button" id="github-auth">
          <img alt="GitHub" src="https://cdn-icons-png.flaticon.com/512/25/25231.png"/>
          <span>GitHub</span>
        </button>
        <button class="social-auth-button" id="apple-auth">
          <img alt="Apple" src="https://cdn-icons-png.flaticon.com/512/0/747.png"/>
          <span>Apple</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Футер как landmark -->
  <footer class="site-legal legal-footer-center" id="site-legal" role="contentinfo">
    <a href="#legal">Правовая оговорка</a>
    <a href="#terms">Условия обслуживания</a>
    <a href="#privacy">Политика конфиденциальности</a>
  </footer>

  <!-- Скрипты -->
  <script src="js/galaxy-bg.js"></script>
  <script src="js/app.js"></script>
  <script src="js/analyzeIdeaForPatents.js"></script>
  <script src="js/auth.js"></script>

  <!-- Убираем дубль кнопки Sign in в хедере (если появится) -->
  <script id="signin-dedupper">
    document.addEventListener('DOMContentLoaded', () => {
      try {
        const header = document.querySelector('.info-panel-header');
        if (!header) return;
        const btns = header.querySelectorAll('.auth-button');
        if (btns.length > 1) {
          const keep = header.querySelector('#header-sign-in') || btns[btns.length - 1];
          btns.forEach(b => { if (b !== keep) b.remove(); });
        }
      } catch(e){}
    });
  </script>

  <script src="js/ui-hardening.js"></script>
  <script src="js/auth-fix.js"></script>
</body>
</html>
